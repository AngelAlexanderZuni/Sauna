@page
@model ProyectoSaunaKalixto.Web.Pages.DashboardModel
@{
    ViewData["Title"] = "Dashboard";
    Layout = "_LayoutSidebar";
}

<style>

/* =============================== */
/* ðŸ”¥ ULTRA LEGENDARIO - KALIXTO ðŸš€ */
/* =============================== */

:root {
    --aurora-1: oklch(0.78 0.24 295);
    --aurora-2: oklch(0.75 0.18 260);
    --aurora-3: oklch(0.72 0.22 305);
    --glass-bg: rgba(255,255,255,0.08);
    --glass-border: rgba(255,255,255,0.17);
    --shadow-neo: rgba(0,0,0,0.45);
    --text-main: #fafafa;
    --text-muted: #c5c5c5;
    --danger: oklch(0.65 0.24 27);
    --success: oklch(0.71 0.18 155);
}

/* AURORA ANIMADA  */
body::before {
    content: "";
    position: fixed;
    top: -20%;
    left: -20%;
    width: 140%;
    height: 140%;
    background: radial-gradient(circle at 30% 20%, var(--aurora-1), transparent 60%),
                radial-gradient(circle at 70% 80%, var(--aurora-2), transparent 60%),
                radial-gradient(circle at 80% 30%, var(--aurora-3), transparent 60%);
    filter: blur(140px);
    z-index: -1;
    animation: auroraMove 16s infinite alternate ease-in-out;
}

@@keyframes auroraMove {
    0% { transform: translateY(-20px); }
    100% { transform: translateY(20px); }
}

/* Tarjetas ULTRA Glass */
.ultra-card {
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    backdrop-filter: blur(20px);
    border-radius: 22px;
    box-shadow: 0 8px 35px var(--shadow-neo);
    padding: 28px;
    transition: all .3s ease;
    position: relative;
    overflow: hidden;
}

.ultra-card::after {
    content: "";
    position: absolute;
    top: -120%;
    left: -120%;
    width: 300%;
    height: 300%;
    background: conic-gradient(
        from 180deg,
        transparent,
        var(--aurora-1),
        var(--aurora-2),
        transparent
    );
    opacity: .14;
    animation: rotateGlow 12s infinite linear;
}

@@keyframes rotateGlow {
    to { transform: rotate(360deg); }
}

.ultra-card:hover {
    transform: translateY(-6px) scale(1.015);
    box-shadow: 0 14px 45px rgba(0,0,0,.55);
}

/* TÃ­tulos */
.ultra-title {
    font-size: 2rem;
    font-weight: 700;
    color: var(--text-main);
}

.ultra-sub {
    color: var(--text-muted);
    font-size: .9rem;
}

/* BotÃ³n ULTRA */
.ultra-btn {
    background: linear-gradient(135deg, var(--aurora-1), var(--aurora-3));
    color: white;
    padding: .8rem 1.4rem;
    border-radius: 14px;
    font-weight: 600;
    box-shadow: 0 6px 20px rgba(0,0,0,.4);
    transition: all .25s ease;
}

.ultra-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 32px rgba(0,0,0,.55);
    filter: brightness(1.2);
}

/* Tabla Legendaria */
.ultra-table tbody tr {
    transition: .25s ease;
}

.ultra-table tbody tr:hover {
    background: rgba(255,255,255,0.14);
    backdrop-filter: blur(12px);
}

/* Animaciones */
.fade {
    animation: fade .65s ease-out forwards;
}
@@keyframes fade {
    from {opacity:0; transform:translateY(12px);}
    to   {opacity:1; transform:translateY(0);}
}
</style>


<div class="p-6 space-y-6">

    <!-- HEADER -->
    <div class="flex justify-between items-center">
        <div>
            <h1 class="text-2xl font-semibold" style="color: var(--foreground);">Dashboard</h1>
            <p class="text-sm mt-1" style="color: var(--muted-foreground);">Bienvenido, @Model.UsuarioNombre â€” @Model.UsuarioRol</p>
        </div>

        <button class="px-4 py-2 rounded-md text-white" style="background-color: var(--primary);">Registrar Cliente</button>
    </div>

    <!-- TARJETAS -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">

        <div class="card p-6">
            <p class="text-sm" style="color: var(--muted-foreground);">Total Clientes</p>
            <h2 class="text-3xl font-bold" style="color: var(--foreground);">@Model.TotalClientes</h2>
        </div>

        <div class="card p-6">
            <p class="text-sm" style="color: var(--muted-foreground);">Por vencer</p>
            <h2 class="text-3xl font-bold" style="color: var(--foreground);">@Model.MembresiasPorVencer</h2>
        </div>

        <div class="card p-6">
            <p class="text-sm" style="color: var(--muted-foreground);">Registros Hoy</p>
            <h2 class="text-3xl font-bold" style="color: var(--foreground);">@Model.RegistrosHoy</h2>
        </div>

        <div class="card p-6">
            <p class="text-sm" style="color: var(--muted-foreground);">SesiÃ³n</p>
            <h2 class="text-xl font-bold" style="color: var(--foreground);">@Model.UsuarioNombre</h2>
        </div>
    </div>

    <!-- GRAFICO -->
    <div class="card p-6">
        <h3 class="text-lg font-semibold mb-4" style="color: var(--foreground);">Visitantes</h3>
        <div class="relative w-full" style="height: 380px; max-height: 380px;">
            <canvas id="visitChart" class="w-full h-full"></canvas>
        </div>
    </div>

    <!-- TABLA -->
    <div class="card p-6 overflow-hidden">
        <h3 class="text-lg font-semibold mb-4" style="color: var(--foreground);">Actividad Reciente</h3>

        <table class="w-full">
            <thead style="background-color: var(--muted);" class="text-left">
                <tr>
                    <th class="px-4 py-3 text-xs font-medium uppercase" style="color: var(--muted-foreground);">Cliente</th>
                    <th class="px-4 py-3 text-xs font-medium uppercase" style="color: var(--muted-foreground);">Estado</th>
                    <th class="px-4 py-3 text-xs font-medium uppercase" style="color: var(--muted-foreground);">MembresÃ­a</th>
                    <th class="px-4 py-3 text-xs font-medium uppercase" style="color: var(--muted-foreground);">Vencimiento</th>
                    <th class="px-4 py-3 text-right text-xs font-medium uppercase" style="color: var(--muted-foreground);">AcciÃ³n</th>
                </tr>
            </thead>
            <tbody style="background-color: var(--card);">
                <tr class="border-t" style="border-color: var(--border);">
                    <td class="px-4 py-3">John Doe</td>
                    <td class="px-4 py-3" style="color: #10b981;">Activo</td>
                    <td class="px-4 py-3">Premium</td>
                    <td class="px-4 py-3">15/12/2024</td>
                    <td class="px-4 py-3 text-right"><button class="text-sm px-3 py-1 rounded-md" style="background-color: var(--muted); color: var(--foreground);">Ver</button></td>
                </tr>

                <tr class="border-t" style="border-color: var(--border);">
                    <td class="px-4 py-3">Alice Smith</td>
                    <td class="px-4 py-3" style="color: #f59e0b;">Por vencer</td>
                    <td class="px-4 py-3">BÃ¡sica</td>
                    <td class="px-4 py-3">20/11/2024</td>
                    <td class="px-4 py-3 text-right"><button class="text-sm px-3 py-1 rounded-md" style="background-color: var(--muted); color: var(--foreground);">Ver</button></td>
                </tr>
            </tbody>
        </table>
    </div>

</div>




<!-- ============== SCRIPTS ============== -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
const ctx = document.getElementById('visitChart').getContext('2d');

const neonGlow = ctx.createLinearGradient(0, 0, 0, 300);
neonGlow.addColorStop(0, "rgba(167,139,250,0.9)");
neonGlow.addColorStop(1, "rgba(167,139,250,0.03)");

new Chart(ctx, {
    type: 'line',
    data: {
        labels: ["Lun", "Mar", "MiÃ©", "Jue", "Vie", "SÃ¡b", "Dom"],
        datasets: [{
            label: "Visitantes",
            data: [120, 150, 180, 260, 290, 310, 280],
            borderColor: "#c084fc",
            backgroundColor: neonGlow,
            fill: true,
            borderWidth: 3,
            tension: .45,
            shadowColor: "#c084fc",
        }]
    },
    options: {
        plugins: {
            legend: { display: false }
        },
        responsive: true,
        maintainAspectRatio: false,
        scales: {
            x: {
                ticks: { color: "rgba(255,255,255,0.7)" },
                grid: { display: false }
            },
            y: {
                ticks: { color: "rgba(255,255,255,0.7)" },
                grid: { color: "rgba(255,255,255,0.1)" }
            }
        }
    }
});
</script>
